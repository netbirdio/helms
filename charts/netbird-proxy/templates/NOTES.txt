NetBird Proxy has been deployed.

{{- if eq .Values.service.type "LoadBalancer" }}

The proxy is exposed via a LoadBalancer service.
It may take a few minutes for the external IP to be provisioned.

  kubectl get svc {{ include "netbird-proxy.fullname" . }} -n {{ .Release.Namespace }} -w

{{- else if eq .Values.service.type "NodePort" }}

The proxy is exposed via NodePort.

  export NODE_PORT=$(kubectl get svc {{ include "netbird-proxy.fullname" . }} -n {{ .Release.Namespace }} -o jsonpath='{.spec.ports[?(@.name=="https")].nodePort}')
  export NODE_IP=$(kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="ExternalIP")].address}')
  echo "https://${NODE_IP}:${NODE_PORT}"

{{- else }}

The proxy is using a ClusterIP service. To access it from outside the cluster,
configure an Ingress resource or use port-forwarding:

  kubectl port-forward svc/{{ include "netbird-proxy.fullname" . }} {{ .Values.service.port }}:{{ .Values.service.port }} -n {{ .Release.Namespace }}

{{- end }}

{{- if .Values.acme.enabled }}

ACME certificate management is enabled ({{ .Values.acme.directory }}).
Certificates are stored in {{ .Values.certDir }}.
Lock method: {{ .Values.acme.certLockMethod }}
{{- end }}

{{- if .Values.proxy.proxyProtocol }}

PROXY protocol is enabled. Ensure your L4 load balancer sends
PROXY protocol v1 or v2 headers.
{{- if .Values.proxy.trustedProxies }}
Trusted sources: {{ .Values.proxy.trustedProxies }}
{{- else }}
WARNING: No trustedProxies set. Any source can send PROXY headers.
Set proxy.trustedProxies to your load balancer's CIDR for security.
{{- end }}
{{- end }}
